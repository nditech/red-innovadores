!function(t){t.fn.slideTo=function(e){return t(this).html(e),t("#members").slickGrid(),t(this).applyMinimumHeightFromChildren(),t(this).find(".pagination_frame").removeClass("frame_right").addClass("frame_center"),init_modal_dialogs(),init_tooltips(),t(this)},t.fn.slickGrid=function(){function e(e){var n=[],i=r();return t(e).find("thead th").each(function(e,o){var r=t(o).widthFromClass();n.push({name:t(o).html(),field:t(o).attr("data-column-id"),id:t(o).attr("data-column-id"),width:r||i[e],resizable:null===r,sortable:t(o).hasClass("sortable")})}),n}function n(e,n){var i=[];return t(e).find("tbody tr").each(function(e,o){var r={};r.id=t(o).attr("data-row-id"),t(o).find("td").each(function(e,i){r[n[e].id]=t(i).html()}),i.push(r)}),i}function i(t,e){for(var n=e.grid.getColumns(),i=[],r=0;r<n.length;r++)i.push(n[r].width);o(i)}function o(e){var n="["+(e||[]).join(",")+"]";t.cookie("membership_column_widths",n,{expires:1e4,path:"/"})}function r(){var e=t.cookie("membership_column_widths",{path:"/"})||"[]";return t.parseJSON(e)}function a(e,n){var i=n.sortAsc?"asc":"desc",o=n.grid.getColumnIndex(n.sortCol.id),r=u({order_by:o,order_dir:i,from_page:""});if("function"==typeof window.history.pushState){var a=location.pathname+location.href.split(location.pathname)[1];window.history.pushState({path:a},"",r),t(".slick-grid").loading(),t(document).paginateTo(r)}else window.location=r}function s(){var t=d();return[parseInt(t.order_by||0),(t.order_dir||"asc").toLowerCase()]}function d(){var t=window.location.toString(),e={},n=t.split("?")[1];if(!n)return{};n=n.split("&");for(var i=0;i<n.length;i++){var o=n[i].split("=");e[o[0]]=o[1]}return e}function l(){return t(".pagination").find("em").text()}function u(e){var n=window.location.toString().replace(/\?.*$/,""),i=d();e=e||{};var o=0;for(k in e)o++,null!==e[k]&&""!==e[k]?i[k]=e[k]:delete i[k];return o>0?n+"?"+t.param(i):o}function c(){t("#menu_container a.action").live("click",p)}function p(e){return e.preventDefault(),t(".slick-grid").loading(),t.ajax(t(this).attr("href"),{type:"PUT"}).complete(function(e){var n=t("<div></div>").appendTo(document.body).hide().html(e.responseText);h(n.find("table").get(0)),t(".slick-grid").stopLoading(),n.remove()}),!1}function h(t){if(!t)return!1;for(var i=e(t),o=n(t,i),r=0;r<o.length;r++){var a=y.getItemIndex(o[r].id);y.updateItem(o[r]),I.invalidateRow(a),console.log(a,o[r])}I.render(),init_tooltips(),f()}function f(){C.find("span.row_actions span").each(function(){var e=t(this).parent().find("> a"),n=e.clone().appendTo(T).addClass("menu_trigger").hide(),i=t(this),o="menu_"+Math.random();t(this).attr("id",o),t(this).appendTo(T).hide(),e.click(function(o){if(o.preventDefault(),!e.hasClass("open")){var r=e.offset(),a=e.outerHeight(),s=e.outerWidth(),d=t(i).outerHeight(!0),l=t(i).outerWidth(!0),u=t(window).height(!0)+t(window).scrollTop();r.top+a+d>u?(n.addClass("menu_on_top"),i.css({position:"absolute",top:r.top-d,left:r.left-l+s}).show(),n.css({position:"absolute",top:r.top-1,left:r.left}).show()):(n.addClass("menu_on_bottom"),i.css({position:"absolute",top:r.top+a,left:r.left-l+s}).show(),n.css({position:"absolute",top:r.top,left:r.left}).show()),e.addClass("open"),window.setTimeout(function(){t(document.body).one("click",function(){e.removeClass("open"),n.removeClass("menu_on_bottom"),n.removeClass("menu_on_top"),i.hide(),n.hide()})},100)}})})}function m(){t("#filter_by").change(function(){var e=t(this).val(),n=l(),i=u({filter_by:e,page:1,from_page:n>1?n:""});if("function"==typeof window.history.pushState){var o=location.pathname+location.href.split(location.pathname)[1];window.history.pushState({path:o},"",i),t(".slick-grid").loading(),t(document).paginateTo(i)}else window.location=i})}var g=function(t){this.id_field="id",this.data=t||[]};g.prototype.getItem=function(t){return this.data[t]},g.prototype.getItemIndex=function(t){if(!t)return null;for(var e=0;e<this.data.length;e++)if(this.data[e][this.id_field]==t)return e;return null},g.prototype.getLength=function(){return this.data.length},g.prototype.push=function(t){this.data.push(t)},g.prototype.updateItemByIndex=function(t,e){this.data[t]=e},g.prototype.updateItem=function(t){var e=this.getItemIndex(t.id);null!==e&&this.updateItemByIndex(e,t)};var v=this[0];if(!v)return!1;var w=e(v),_=n(v,w),y=new g(_),b={enableCellNavigation:!0,enableColumnReorder:!1,autoHeight:!0,forceFitColumns:!0,rowHeight:35,headerRowHeight:35};t(v).wrap("<div></div>");var C=t(v).parent();t(v).parent().addClass("slick-grid").css({width:t(v).width()});var I=new Slick.Grid(t(v).parent().get(0),y,w,b);t(".pagination_container").applyMinimumHeightFromChildren();var S=this;I.onSort.subscribe(function(){a.apply(S,arguments)}),I.onColumnsResized.subscribe(function(){i.apply(S,arguments)});var x=s();I.setSortColumn(w[x[0]||0].id,"asc"==x[1]),t(v).parent().show(),t("#menu_container").remove();var T=t('<div id="menu_container"></div>').appendTo(document.body).css({width:0,height:0});return init_tooltips(),f(),c(),m(),t(v)},t.fn.widthFromClass=function(){var t=this[0];if(!t)return null;for(var e=t.className.split(" "),n=0;n<e.length;n++){var i=e[n];if(/^width_\d\d$/.exec(i))return parseInt(i.replace("width_",""))}return null},t.fn.loading=function(){t(this).find(".slick-header-column:last-child").css({"background-image":"url(/assets/refinery/icons/ajax-loader-bb7a398cc872a5a275c1c2fe40ea19c0.gif)","background-position":"right center","background-repeat":"no-repeat"})},t.fn.stopLoading=function(){t(this).find(".slick-header-column:last-child").css({"background-image":""})},/*
	 * getStyleObject Plugin for jQuery JavaScript Library
	 * From: http://upshots.org/?p=112
	 *
	 * Copyright: Unknown, see source link
	 * Plugin version by Dakota Schneider (http://hackthetruth.org)
	 */
t.fn.getStyleObject=function(){var t,e=this.get(0),n={};if(window.getComputedStyle){var i=function(t,e){return e.toUpperCase()};t=window.getComputedStyle(e,null);for(var o=0;o<t.length;o++){var r=t[o],a=r.replace(/\-([a-z])/g,i),s=t.getPropertyValue(r);n[a]=s}return n}if(e.currentStyle){t=e.currentStyle;for(var r in t)n[r]=t[r];return n}return this.css()}}(jQuery);